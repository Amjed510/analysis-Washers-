# ğŸ“‹ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠ - Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„Ø«Ø§Ù†ÙŠ

## Ù†Ø¸Ø§Ù… WashPOS Ø¨Ù‡ÙŠÙƒÙ„ÙŠØ© Cloud-Centric (Always-Online)

---

> [!CAUTION] > **Ù†ÙˆØ¹ Ø§Ù„Ù‡ÙŠÙƒÙ„ÙŠØ©:** Cloud-Centric / Always-Online  
> **Ø§Ù„Ù…Ø¨Ø¯Ø£:** Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ù‡Ùˆ "Ø£ÙƒØ³Ø¬ÙŠÙ†" Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ - Ù„Ø§ ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ†Ù‡  
> **Ù…Ù†Ø§Ø³Ø¨ Ù„Ù€:** Ø§Ù„Ù…ØºØ§Ø³Ù„ Ø°Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø³ØªÙ‚Ø± ÙˆØ§Ù„Ù…ÙˆØ«ÙˆÙ‚

---

## 1. Ø§Ù„ÙÙ„Ø³ÙØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©

### 1.1 Ø§Ù„Ù…Ø¨Ø¯Ø£ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ

```
"Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ± - Ø§Ù„Ø¬Ù‡Ø§Ø² Ù…Ø¬Ø±Ø¯ ÙˆØ§Ø¬Ù‡Ø©"
```

### 1.2 Ù…Ø®Ø·Ø· Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„Ø¹Ø§Ù…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Cloud-Centric Architecture                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                  Connectivity Check                  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                 â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚              â”‚                         â”‚                   â”‚
â”‚              â–¼                         â–¼                   â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚        â”‚ ğŸŸ¢ Ù…ØªØµÙ„  â”‚             â”‚ ğŸ”´ ØºÙŠØ± Ù…ØªØµÙ„  â”‚          â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚              â”‚                         â”‚                   â”‚
â”‚              â–¼                         â–¼                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚ ÙˆØ§Ø¬Ù‡Ø© POS      â”‚      â”‚   Ø´Ø§Ø´Ø© Ø§Ù„Ø­Ø¸Ø±        â”‚        â”‚
â”‚   â”‚ ØªØ¹Ù…Ù„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„    â”‚      â”‚   "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„"   â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                     â”‚        â”‚
â”‚              â”‚              â”‚ âš ï¸ Ø§Ù†ØªØ¸Ø± Ø¹ÙˆØ¯Ø©     â”‚        â”‚
â”‚              â–¼              â”‚    Ø§Ù„Ø§ØªØµØ§Ù„         â”‚        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚   â”‚ Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨       â”‚                                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚              â”‚                                             â”‚
â”‚              â–¼                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚   â”‚ Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø³ÙŠØ±ÙØ±   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€ Real-time API              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚              â”‚                                             â”‚
â”‚              â–¼                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚   â”‚ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€ Loading State              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚              â”‚                                             â”‚
â”‚              â–¼                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚   â”‚ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø³ÙŠØ±ÙØ±   â”‚                                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚              â”‚                                             â”‚
â”‚              â–¼                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚   â”‚ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£ÙƒÙŠØ¯ ÙÙ‚Ø·            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©

### 2.1 Ø§Ù„ÙˆØ­Ø¯Ø© 1: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§ØªØµØ§Ù„ (Connectivity Manager)

| Ø§Ù„Ù…ØªØ·Ù„Ø¨              | Ø§Ù„ÙˆØµÙ                         | Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© |
| -------------------- | ----------------------------- | -------- |
| **Network Listener** | Ù…Ø±Ø§Ù‚Ø¨ Ø´Ø¨ÙƒØ© ÙŠØ¹Ù…Ù„ Ø¯Ø§Ø¦Ù…Ø§Ù‹        | Ø­Ø±Ø¬      |
| **Status Indicator** | Ù…Ø¤Ø´Ø± ÙˆØ§Ø¶Ø­ (Ù…ØªØµÙ„/ØºÙŠØ± Ù…ØªØµÙ„)     | Ø­Ø±Ø¬      |
| **Blocking Screen**  | Ø´Ø§Ø´Ø© Ø­Ø¸Ø± Ø¹Ù†Ø¯ ÙÙ‚Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„      | Ø­Ø±Ø¬      |
| **Auto Reconnect**   | Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ | Ø¹Ø§Ù„ÙŠØ©    |
| **Server Ping**      | ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±          | Ø¹Ø§Ù„ÙŠØ©    |

#### ConnectivityService

```dart
class ConnectivityService extends GetxService {
  final Connectivity _connectivity = Connectivity();
  final Dio _dio;

  final RxBool isConnected = false.obs;
  final RxBool isServerReachable = false.obs;

  @override
  void onInit() {
    super.onInit();
    _startMonitoring();
  }

  void _startMonitoring() {
    // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø´Ø¨ÙƒØ©
    _connectivity.onConnectivityChanged.listen((result) async {
      isConnected.value = result != ConnectivityResult.none;

      if (isConnected.value) {
        await _checkServerReachability();
      } else {
        isServerReachable.value = false;
        _showBlockingScreen();
      }
    });

    // ÙØ­Øµ Ø¯ÙˆØ±ÙŠ Ù„Ù„Ø³ÙŠØ±ÙØ±
    Timer.periodic(Duration(seconds: 30), (_) => _checkServerReachability());
  }

  Future<void> _checkServerReachability() async {
    try {
      final response = await _dio.get(
        '/health',
        options: Options(
          sendTimeout: Duration(seconds: 5),
          receiveTimeout: Duration(seconds: 5),
        ),
      );
      isServerReachable.value = response.statusCode == 200;
    } catch (e) {
      isServerReachable.value = false;
    }
  }

  void _showBlockingScreen() {
    Get.dialog(
      WillPopScope(
        onWillPop: () async => false, // Ù…Ù†Ø¹ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
        child: NoConnectionScreen(),
      ),
      barrierDismissible: false,
    );
  }
}
```

### 2.2 Ø§Ù„ÙˆØ­Ø¯Ø© 2: Ø¯ÙˆØ±Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹ (Payment Cycle)

#### ØªØ¯ÙÙ‚ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Payment Flow Diagram                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚   â”‚ 1. Ø§Ø¶ØºØ·    â”‚                                          â”‚
â”‚   â”‚    "Ø¯ÙØ¹"   â”‚                                          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚          â”‚                                                  â”‚
â”‚          â–¼                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚ 2. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„                  â”‚                  â”‚
â”‚   â”‚    if (!isServerReachable)          â”‚                  â”‚
â”‚   â”‚       return "ØºÙŠØ± Ù…ØªØµÙ„"             â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚          â”‚                                                  â”‚
â”‚          â–¼                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚ 3. Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¯ÙØ¹ Ù„Ù„Ø³ÙŠØ±ÙØ±          â”‚                  â”‚
â”‚   â”‚    POST /api/orders                 â”‚                  â”‚
â”‚   â”‚    + Idempotency-Key header         â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚          â”‚                                                  â”‚
â”‚          â–¼                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚ 4. Loading State                    â”‚                  â”‚
â”‚   â”‚    "Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø·Ù„Ø¨..."           â”‚                  â”‚
â”‚   â”‚    (Block all interactions)         â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚          â”‚                                                  â”‚
â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚          â”‚                                  â”‚              â”‚
â”‚          â–¼                                  â–¼              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚  âœ… Success â”‚                  â”‚  âŒ Failed  â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚          â”‚                                  â”‚              â”‚
â”‚          â–¼                                  â–¼              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ 5. Ø·Ø¨Ø§Ø¹Ø©   â”‚                  â”‚ Ø¹Ø±Ø¶ Ø®ÙŠØ§Ø±Ø§Øª:    â”‚    â”‚
â”‚   â”‚    Ø§Ù„ÙØ§ØªÙˆØ±Ø© â”‚                  â”‚ [Ø¥Ø¹Ø§Ø¯Ø©] [Ø¥Ù„ØºØ§Ø¡] â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### PaymentController

```dart
class PaymentController extends GetxController {
  final ApiClient _api;
  final PrinterService _printer;
  final ConnectivityService _connectivity;

  final RxBool isProcessing = false.obs;
  final RxString statusMessage = ''.obs;

  Future<void> processPayment(Order order) async {
    // 1. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„
    if (!_connectivity.isServerReachable.value) {
      Get.snackbar(
        'Ø®Ø·Ø£',
        'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±',
        backgroundColor: Colors.red,
      );
      return;
    }

    isProcessing.value = true;
    statusMessage.value = 'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨...';

    try {
      // 2. ØªÙˆÙ„ÙŠØ¯ Ù…ÙØªØ§Ø­ Idempotency
      final idempotencyKey = 'ORD-${DateTime.now().millisecondsSinceEpoch}';

      // 3. Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø³ÙŠØ±ÙØ±
      statusMessage.value = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø³ÙŠØ±ÙØ±...';

      final response = await _api.createOrder(
        order: order,
        idempotencyKey: idempotencyKey,
      ).timeout(
        Duration(seconds: 30),
        onTimeout: () => throw TimeoutException('Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ù‡Ù„Ø©'),
      );

      if (response.success) {
        // 4. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù€ Server ID
        order.serverId = response.data.id;
        order.status = OrderStatus.completed;

        // 5. Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Ø¨Ø¹Ø¯ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙÙ‚Ø·!)
        statusMessage.value = 'Ø¬Ø§Ø±ÙŠ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©...';
        await _printer.printReceipt(order);

        Get.back();
        Get.snackbar('Ù†Ø¬Ø§Ø­', 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­');

      } else {
        throw Exception(response.error);
      }

    } on TimeoutException {
      _showRetryDialog('Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ù‡Ù„Ø© - ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„');

    } on SocketException {
      _showRetryDialog('ÙÙ‚Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©');

    } catch (e) {
      _showRetryDialog('Ø®Ø·Ø£: ${e.toString()}');

    } finally {
      isProcessing.value = false;
    }
  }

  void _showRetryDialog(String message) {
    Get.dialog(
      AlertDialog(
        title: Text('ÙØ´Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©'),
        content: Text(message),
        actions: [
          TextButton(
            onPressed: () => Get.back(),
            child: Text('Ø¥Ù„ØºØ§Ø¡'),
          ),
          ElevatedButton(
            onPressed: () {
              Get.back();
              processPayment(currentOrder);
            },
            child: Text('Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©'),
          ),
        ],
      ),
    );
  }
}
```

### 2.3 Ø§Ù„ÙˆØ­Ø¯Ø© 3: Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙØ´Ù„ (Failure Handling)

#### Ù…Ø®Ø·Ø· Ø§Ù„ÙØ´Ù„: Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø£Ø«Ù†Ø§Ø¡ Ø¯ÙØ¹ 100 Ø±ÙŠØ§Ù„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Failure Scenario: Network Drop During Payment        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  T=0s: Ø§Ù„ÙƒØ§Ø´ÙŠØ± ÙŠØ¶ØºØ· "Ø¯ÙØ¹" (100 Ø±ÙŠØ§Ù„)                          â”‚
â”‚         â”‚                                                      â”‚
â”‚         â–¼                                                      â”‚
â”‚  T=1s: Ø¥Ø±Ø³Ø§Ù„ POST /api/orders                                  â”‚
â”‚        Headers: Idempotency-Key: ORD-1702305600000             â”‚
â”‚         â”‚                                                      â”‚
â”‚         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•               â”‚
â”‚         âš¡ Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª âš¡                                  â”‚
â”‚         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•               â”‚
â”‚         â”‚                                                      â”‚
â”‚         â–¼                                                      â”‚
â”‚  T=31s: Timeout Exception                                      â”‚
â”‚         â”‚                                                      â”‚
â”‚         â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚              ğŸ“‹ What happens now?                     â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚                                                      â”‚     â”‚
â”‚  â”‚  Ø§Ù„Ø³Ø¤Ø§Ù„: Ù‡Ù„ ÙˆØµÙ„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„Ø³ÙŠØ±ÙØ± Ø£Ù… Ù„Ø§ØŸ                 â”‚     â”‚
â”‚  â”‚                                                      â”‚     â”‚
â”‚  â”‚  Ø§Ù„Ø­Ø§Ù„Ø© 1: Ù„Ù… ÙŠØµÙ„                                    â”‚     â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚     â”‚
â”‚  â”‚  - Ø§Ù„Ø³ÙŠØ±ÙØ± Ù„Ø§ ÙŠØ¹Ø±Ù Ø´ÙŠØ¡ Ø¹Ù† Ø§Ù„Ø·Ù„Ø¨                      â”‚     â”‚
â”‚  â”‚  - Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù… ÙŠÙØ®ØµÙ… Ù…Ù†Ù‡ Ø´ÙŠØ¡                           â”‚     â”‚
â”‚  â”‚  - Ø¢Ù…Ù† Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©                               â”‚     â”‚
â”‚  â”‚                                                      â”‚     â”‚
â”‚  â”‚  Ø§Ù„Ø­Ø§Ù„Ø© 2: ÙˆØµÙ„ ÙˆØªÙ… Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡                           â”‚     â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚     â”‚
â”‚  â”‚  - Ø§Ù„Ø³ÙŠØ±ÙØ± Ø£Ù†Ø´Ø£ Ø§Ù„Ø·Ù„Ø¨                                â”‚     â”‚
â”‚  â”‚  - Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù‚Ø¯ ÙŠÙƒÙˆÙ† ØªÙ… Ø®ØµÙ… Ø§Ù„Ù…Ø¨Ù„Øº (Ø¨Ø·Ø§Ù‚Ø©)              â”‚     â”‚
â”‚  â”‚  - Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø³ØªØ³ØªØ®Ø¯Ù… Ù†ÙØ³ Idempotency Key       â”‚     â”‚
â”‚  â”‚  - Ø§Ù„Ø³ÙŠØ±ÙØ± Ø³ÙŠÙØ±Ø¬Ø¹ Ù†ÙØ³ Ø§Ù„Ù†ØªÙŠØ¬Ø© (Ù„Ø§ ØªÙƒØ±Ø§Ø±!)           â”‚     â”‚
â”‚  â”‚                                                      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                                                      â”‚
â”‚         â–¼                                                      â”‚
â”‚  Ø¹Ù†Ø¯ Ø¹ÙˆØ¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„:                                             â”‚
â”‚         â”‚                                                      â”‚
â”‚         â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨:                               â”‚     â”‚
â”‚  â”‚  GET /api/orders/status?idempotency_key=ORD-xxx      â”‚     â”‚
â”‚  â”‚                                                      â”‚     â”‚
â”‚  â”‚  Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©:                                    â”‚     â”‚
â”‚  â”‚  â€¢ 200 + order_id â†’ Ø§Ù„Ø·Ù„Ø¨ Ù…ÙˆØ¬ÙˆØ¯ âœ… Ø·Ø¨Ø§Ø¹Ø©            â”‚     â”‚
â”‚  â”‚  â€¢ 404            â†’ Ø§Ù„Ø·Ù„Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ â†’ Ø¥Ø¹Ø§Ø¯Ø©         â”‚     â”‚
â”‚  â”‚  â€¢ 500            â†’ Ø®Ø·Ø£ Ø³ÙŠØ±ÙØ± â†’ Ø§Ù†ØªØ¸Ø§Ø±              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                â”‚
â”‚  âš ï¸ Ø§Ù„Ø¶Ù…Ø§Ù†Ø§Øª:                                                 â”‚
â”‚  â€¢ Idempotency Key ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…ÙƒØ±Ø±                          â”‚
â”‚  â€¢ Ø§Ù„ØªØ­Ù‚Ù‚ Ø¹Ù†Ø¯ Ø¹ÙˆØ¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„                                    â”‚
â”‚  â€¢ Ù„Ø§ Ø·Ø¨Ø§Ø¹Ø© Ø¨Ø¯ÙˆÙ† ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø³ÙŠØ±ÙØ±                                â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Ø§Ù„Ù…ÙƒØ¯Ø³ Ø§Ù„ØªÙ‚Ù†ÙŠ

| Ø§Ù„ÙØ¦Ø©            | Ø§Ù„Ø­Ø²Ù…Ø©                  | Ø§Ù„Ø¥ØµØ¯Ø§Ø± | Ø§Ù„Ø³Ø¨Ø¨                |
| ---------------- | ----------------------- | ------- | -------------------- |
| **Network**      | `dio`                   | ^5.4.0  | HTTP Client Ù‚ÙˆÙŠ      |
| **Network**      | `retrofit`              | ^4.0.3  | Type-safe API        |
| **Connectivity** | `connectivity_plus`     | ^5.0.2  | Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø´Ø¨ÙƒØ©        |
| **State**        | `get`                   | ^4.6.5  | State Management     |
| **Hardware**     | `sunmi_printer_plus`    | ^1.3.5  | Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©              |
| **ZATCA**        | `zatca_fatoora_flutter` | ^1.0.0  | QR Code              |
| **Realtime**     | `socket_io_client`      | ^2.0.1  | Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„Ù„Ù€ Realtime |

> [!NOTE]
> Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù€ `Isar` Ø£Ùˆ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ© Ù…Ø¹Ù‚Ø¯Ø© - Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±

---

## 4. Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

```
lib/
â”œâ”€â”€ main.dart
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ bindings/
â”‚   â”œâ”€â”€ routes/
â”‚   â””â”€â”€ themes/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ network/
â”‚   â”‚   â”œâ”€â”€ api_client.dart
â”‚   â”‚   â”œâ”€â”€ api_endpoints.dart
â”‚   â”‚   â”œâ”€â”€ connectivity_service.dart
â”‚   â”‚   â””â”€â”€ interceptors/
â”‚   â”‚       â”œâ”€â”€ auth_interceptor.dart
â”‚   â”‚       â””â”€â”€ error_interceptor.dart
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ printer_service.dart
â”‚       â””â”€â”€ zatca_service.dart
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ order_model.dart
â”‚   â”‚   â”œâ”€â”€ service_model.dart
â”‚   â”‚   â””â”€â”€ payment_model.dart
â”‚   â””â”€â”€ repositories/
â”‚       â”œâ”€â”€ order_repository.dart
â”‚       â””â”€â”€ service_repository.dart
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ pos/
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”œâ”€â”€ pos_controller.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ cart_controller.dart
â”‚   â”‚   â”‚   â””â”€â”€ payment_controller.dart
â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”œâ”€â”€ pos_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ payment_screen.dart
â”‚   â”‚   â”‚   â””â”€â”€ widgets/
â”‚   â”‚   â””â”€â”€ bindings/
â”‚   â””â”€â”€ reports/
â””â”€â”€ widgets/
    â”œâ”€â”€ connectivity_indicator.dart
    â”œâ”€â”€ loading_overlay.dart
    â””â”€â”€ no_connection_screen.dart
```

---

## 5. ØªØµÙ…ÙŠÙ… ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø§Øª

### Ø´Ø§Ø´Ø© "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚                         ğŸ“¡                                  â”‚
â”‚                                                             â”‚
â”‚                   Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„                             â”‚
â”‚                                                             â”‚
â”‚           ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª                     â”‚
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚               â”‚  âŸ³ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©  â”‚                       â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   ğŸ’¡ Ù†ØµÙŠØ­Ø©: ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù†Ù‚Ø¯ÙŠ Offline              â”‚
â”‚      (Ø³ÙŠØªÙ… Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹)                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚                    â— â—‘ â—’ â—“                                  â”‚
â”‚                                                             â”‚
â”‚               Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø·Ù„Ø¨...                          â”‚
â”‚                                                             â”‚
â”‚              Ù„Ø§ ØªØºÙ„Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚                                â”‚
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   Ø§Ù„Ø®Ø·ÙˆØ© 2 Ù…Ù† 3: Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø³ÙŠØ±ÙØ±                              â”‚
â”‚   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 60%                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Ø§Ù„Ù…Ø²Ø§ÙŠØ§ ÙˆØ§Ù„Ø¹ÙŠÙˆØ¨

### âœ… Ø§Ù„Ù…Ø²Ø§ÙŠØ§

| Ø§Ù„Ù…ÙŠØ²Ø©           | Ø§Ù„ÙˆØµÙ                        |
| ---------------- | ---------------------------- |
| **Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙˆØ­Ø¯Ø©** | ÙƒÙ„ Ø´ÙŠØ¡ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±           |
| **Ù„Ø§ ØªØ¹Ø§Ø±Ø¶Ø§Øª**   | Ù…ØµØ¯Ø± ÙˆØ§Ø­Ø¯ Ù„Ù„Ø­Ù‚ÙŠÙ‚Ø©            |
| **Ø¨Ø³ÙŠØ·**         | Ù„Ø§ Ù…Ù†Ø·Ù‚ Ù…Ø²Ø§Ù…Ù†Ø© Ù…Ø¹Ù‚Ø¯          |
| **ØªÙ‚Ø§Ø±ÙŠØ± ÙÙˆØ±ÙŠØ©** | Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø© Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© ÙÙˆØ±Ø§Ù‹ |

### âŒ Ø§Ù„Ø¹ÙŠÙˆØ¨

| Ø§Ù„Ø¹ÙŠØ¨          | Ø§Ù„ÙˆØµÙ               |
| -------------- | ------------------- |
| **ØªÙˆÙ‚Ù Ø§Ù„Ø¹Ù…Ù„** | Ù„Ø§ ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª |
| **Ø§Ø¹ØªÙ…Ø§Ø¯ ÙƒÙ„ÙŠ** | Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙˆØ§Ù„Ø´Ø¨ÙƒØ© |
| **ØªØ¬Ø±Ø¨Ø© Ø³ÙŠØ¦Ø©** | Ø¹Ù†Ø¯ ÙÙ‚Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„     |
| **Ø¨Ø·Ø¡ Ù†Ø³Ø¨ÙŠ**   | Ø§Ù†ØªØ¸Ø§Ø± Ø±Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±   |

---

## 7. Ø®Ø§Ø±Ø·Ø© Ø§Ù„Ø·Ø±ÙŠÙ‚

| Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ | Ø§Ù„Ù…Ù‡Ù…Ø©                           |
| ------- | -------------------------------- |
| 1-2     | Ø¥Ø¹Ø¯Ø§Ø¯ Flutter + Dio + Retrofit   |
| 3-4     | ÙˆØ§Ø¬Ù‡Ø© POS + Connectivity         |
| 5-6     | Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© + ZATCA QR               |
| 7-8     | API Integration + Error Handling |
| 9-10    | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ±Ø¯ÙŠØ§Øª                   |

---

## 8. Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ©

| Ø§Ù„Ø¨Ù†Ø¯        | Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª           |
| ------------ | ------------------- |
| **Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª** | WiFi Ù…Ø³ØªÙ‚Ø± Ø£Ùˆ 4G    |
| **Ø§Ù„Ø³ÙŠØ±ÙØ±**  | REST API + Database |
| **Latency**  | < 500ms             |
| **Uptime**   | 99.9%               |

---

## 9. Ù…Ù‚Ø§Ø±Ù†Ø© Ø³Ø±ÙŠØ¹Ø© Ù…Ø¹ Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„Ø£ÙˆÙ„

| Ø§Ù„Ù…Ø¹ÙŠØ§Ø±       | Offline-First  | Cloud-Centric    |
| ------------- | -------------- | ---------------- |
| **Ø§Ù„Ø§ØªØµØ§Ù„**   | Ø§Ø®ØªÙŠØ§Ø±ÙŠ        | Ø¥Ù„Ø²Ø§Ù…ÙŠ           |
| **Ø§Ù„Ø³Ø±Ø¹Ø©**    | Ù…Ø­Ù„ÙŠ (Ø³Ø±ÙŠØ¹)    | Ø´Ø¨ÙƒØ© (Ø£Ø¨Ø·Ø£)      |
| **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª**  | Ù…Ø­Ù„ÙŠØ© + Ø³Ø­Ø§Ø¨ÙŠØ© | Ø³Ø­Ø§Ø¨ÙŠØ© ÙÙ‚Ø·       |
| **Ø§Ù„ØªØ¹Ù‚ÙŠØ¯**   | Ø¹Ø§Ù„ÙŠ (Ù…Ø²Ø§Ù…Ù†Ø©)  | Ù…Ù†Ø®ÙØ¶            |
| **Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚ÙŠØ©** | Ø¹Ø§Ù„ÙŠØ©          | ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø¨ÙƒØ© |

---

## 10. Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª Ù…Ù† Ø§Ù„Ø£Ø¨Ø­Ø§Ø« Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© (Research-Based Best Practices)

> [!NOTE]
> Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ù…Ø³ØªØ®Ù„ØµØ© Ù…Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª ÙÙŠ Ø£Ù†Ø¸Ù…Ø© POS Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© ÙˆØªÙˆØ«ÙŠÙ‚ Payment SDKs

### 10.1 Ù…Ø¹Ø§Ù„Ø¬Ø© Timeout ÙÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª (Payment Timeout Handling)

ÙˆÙÙ‚Ø§Ù‹ Ù„ØªÙˆØ«ÙŠÙ‚ Adyen Ùˆ Stripe Ùˆ Square:

| Ù†ÙˆØ¹ Ø§Ù„Ù€ Timeout        | Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠØ© | Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡                    |
| ---------------------- | --------------- | -------------------------- |
| **Processing Timeout** | 120-150 Ø«Ø§Ù†ÙŠØ©   | Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙˆØ¹Ø±Ø¶ Ø®ÙŠØ§Ø±Ø§Øª |
| **Device Timeout**     | 30-60 Ø«Ø§Ù†ÙŠØ©     | PIN/Card entry timeout     |
| **Request Timeout**    | 30 Ø«Ø§Ù†ÙŠØ©        | HTTP request timeout       |
| **NFC Retry**          | 5-10 Ø«ÙˆØ§Ù†ÙŠ      | Ø¥Ø¹Ø§Ø¯Ø© Ù…Ø­Ø§ÙˆÙ„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©       |

```dart
class TimeoutConfig {
  // Adyen recommended timeouts
  static const Duration processingTimeout = Duration(seconds: 120);
  static const Duration deviceTimeout = Duration(seconds: 60);
  static const Duration requestTimeout = Duration(seconds: 30);
  static const Duration nfcRetryTimeout = Duration(seconds: 10);
}
```

### 10.2 Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ SDK (SDK Error Handling)

```dart
class PaymentErrorHandler {
  Future<PaymentResult> handleError(PaymentException error) async {
    switch (error.type) {
      case PaymentErrorType.timeout:
        // ÙˆÙÙ‚Ø§Ù‹ Ù„Ù€ Square SDK docs
        return _handleTimeout(error);

      case PaymentErrorType.networkError:
        // Adyen recommendation: check transaction status
        return await _checkTransactionStatus(error.idempotencyKey);

      case PaymentErrorType.cardDeclined:
        // Show user-friendly message
        return PaymentResult.declined(
          message: _getDeclineMessage(error.declineCode),
        );

      case PaymentErrorType.terminalError:
        // Xendit SDK: retry logic
        return await _retryWithBackoff(error);

      default:
        return PaymentResult.failed(error.message);
    }
  }

  Future<PaymentResult> _retryWithBackoff(PaymentException error) async {
    const maxRetries = 3;
    const baseDelay = Duration(seconds: 2);

    for (int i = 0; i < maxRetries; i++) {
      await Future.delayed(baseDelay * (i + 1)); // Exponential backoff

      try {
        return await _processPayment();
      } catch (e) {
        if (i == maxRetries - 1) rethrow;
      }
    }

    return PaymentResult.failed('Max retries exceeded');
  }
}
```

### 10.3 ØªÙƒØ§Ù…Ù„ Ø¨Ù†Ùƒ Ø¥Ù†Ù…Ø§Ø¡ (Alinma Bank Integration)

> [!IMPORTANT]
> Ø¨Ù†Ùƒ Ø¥Ù†Ù…Ø§Ø¡ ÙŠÙˆÙØ± **API Portal** Ùˆ **E-Payment Gateway** Ùˆ **Sandbox** Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ†

#### Alinma API Portal

| Ø§Ù„Ø®Ø¯Ù…Ø©                | Ø§Ù„ÙˆØµÙ              | Ø§Ù„Ø±Ø§Ø¨Ø·              |
| --------------------- | ------------------ | ------------------- |
| **Developer Portal**  | ÙˆØ«Ø§Ø¦Ù‚ ÙˆØ£Ø¯ÙˆØ§Øª ØªØ·ÙˆÙŠØ± | alinma.com/api      |
| **Sandbox**           | Ø¨ÙŠØ¦Ø© Ø§Ø®ØªØ¨Ø§Ø±        | Ù…ØªØ§Ø­ Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ†       |
| **E-Payment Gateway** | Ø¨ÙˆØ§Ø¨Ø© Ø¯ÙØ¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ | Ù„Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© |
| **Mada Support**      | Ø¯Ø¹Ù… Ø´Ø¨ÙƒØ© Ù…Ø¯Ù‰       | Ù…Ø¯Ù…Ø¬                |

#### Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±

```dart
class AlinmaRequirements {
  // Ù…ØªØ·Ù„Ø¨Ø§Øª ÙØªØ­ Ø­Ø³Ø§Ø¨ ØªØ§Ø¬Ø±
  static const requirements = [
    'Ø­Ø³Ø§Ø¨ Ø¬Ø§Ø±ÙŠ ÙÙŠ Ø¨Ù†Ùƒ Ø¥Ù†Ù…Ø§Ø¡',
    'Ø³Ø¬Ù„ ØªØ¬Ø§Ø±ÙŠ Ø³Ø§Ø±ÙŠ',
    'Ù…ÙˆÙ‚Ø¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ù„Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©)',
    'Ø´Ù‡Ø§Ø¯Ø© SSL (HTTPS)',
  ];

  // Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©
  static const supportedMethods = [
    'mada',           // Ø´Ø¨ÙƒØ© Ù…Ø¯Ù‰ Ø§Ù„Ù…Ø­Ù„ÙŠØ©
    'visa',           // Visa
    'mastercard',     // Mastercard
    'madaPay',        // Mada Pay QR
    'applePay',       // Apple Pay (Ù‚Ø±ÙŠØ¨Ø§Ù‹)
  ];
}
```

### 10.4 Real-Time Payment Processing Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Real-Time Payment Processing (Alinma)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. Initialize Terminal                                     â”‚
â”‚     â””â”€â–º Alinma SDK â†’ Terminal Ready                        â”‚
â”‚                                                             â”‚
â”‚  2. Start Transaction                                       â”‚
â”‚     â””â”€â–º POST /payment/initiate                             â”‚
â”‚         {                                                   â”‚
â”‚           "amount": 100.00,                                â”‚
â”‚           "currency": "SAR",                               â”‚
â”‚           "terminal_id": "TERM-001",                       â”‚
â”‚           "idempotency_key": "ORD-123456"                  â”‚
â”‚         }                                                   â”‚
â”‚                                                             â”‚
â”‚  3. Card Interaction                                        â”‚
â”‚     â””â”€â–º Terminal prompts: "Insert/Tap Card"                â”‚
â”‚     â””â”€â–º Read Card Data (EMV/NFC)                           â”‚
â”‚     â””â”€â–º PIN Entry (if required)                            â”‚
â”‚                                                             â”‚
â”‚  4. Authorization Request                                   â”‚
â”‚     â””â”€â–º Terminal â†’ Alinma Gateway â†’ Card Network â†’ Issuer  â”‚
â”‚     â””â”€â–º Timeout: 120 seconds                               â”‚
â”‚                                                             â”‚
â”‚  5. Response Handling                                       â”‚
â”‚     â””â”€â–º Approved: Print Receipt + Update DB                â”‚
â”‚     â””â”€â–º Declined: Show Reason + Offer Retry                â”‚
â”‚     â””â”€â–º Timeout: Check Status API + Retry                  â”‚
â”‚                                                             â”‚
â”‚  6. Settlement                                              â”‚
â”‚     â””â”€â–º Batch settlement (Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ÙŠÙˆÙ…)                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.5 Dio Interceptors Ù„Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª

```dart
class PaymentInterceptor extends Interceptor {
  @override
  void onRequest(RequestOptions options, RequestInterceptorHandler handler) {
    // Add Idempotency Key to all payment requests
    if (options.path.contains('/payment')) {
      options.headers['Idempotency-Key'] ??= _generateIdempotencyKey();
      options.headers['X-Terminal-ID'] = _terminalId;
    }

    // Increase timeout for payment requests
    if (options.path.contains('/payment/process')) {
      options.sendTimeout = Duration(seconds: 120);
      options.receiveTimeout = Duration(seconds: 120);
    }

    super.onRequest(options, handler);
  }

  @override
  void onError(DioException err, ErrorInterceptorHandler handler) {
    if (err.type == DioExceptionType.connectionTimeout ||
        err.type == DioExceptionType.receiveTimeout) {
      // Log timeout for reconciliation
      _logPaymentTimeout(err.requestOptions);

      // Check if payment was processed
      _checkPaymentStatus(
        err.requestOptions.headers['Idempotency-Key'],
      );
    }

    super.onError(err, handler);
  }
}
```

### 10.6 Connectivity Service Ù…Ø­Ø³Ù‘Ù†

```dart
class EnhancedConnectivityService extends GetxService {
  final Connectivity _connectivity = Connectivity();
  final Dio _dio;

  final RxBool isConnected = false.obs;
  final RxBool isServerReachable = false.obs;
  final RxBool isPaymentGatewayReachable = false.obs;
  final Rx<NetworkQuality> networkQuality = NetworkQuality.unknown.obs;

  // Ping multiple endpoints
  Future<void> checkAllEndpoints() async {
    await Future.wait([
      _checkServerHealth(),
      _checkPaymentGatewayHealth(),
      _measureNetworkQuality(),
    ]);
  }

  Future<void> _checkServerHealth() async {
    try {
      final stopwatch = Stopwatch()..start();
      await _dio.get('/health');
      stopwatch.stop();

      isServerReachable.value = true;

      // Measure latency
      if (stopwatch.elapsedMilliseconds < 200) {
        networkQuality.value = NetworkQuality.excellent;
      } else if (stopwatch.elapsedMilliseconds < 500) {
        networkQuality.value = NetworkQuality.good;
      } else {
        networkQuality.value = NetworkQuality.poor;
      }
    } catch (e) {
      isServerReachable.value = false;
      networkQuality.value = NetworkQuality.disconnected;
    }
  }

  Future<void> _checkPaymentGatewayHealth() async {
    try {
      await _dio.get('/payment/health');
      isPaymentGatewayReachable.value = true;
    } catch (e) {
      isPaymentGatewayReachable.value = false;
    }
  }

  // Block UI if network quality is poor
  bool canProcessPayment() {
    return isConnected.value &&
           isServerReachable.value &&
           isPaymentGatewayReachable.value &&
           networkQuality.value != NetworkQuality.poor;
  }
}

enum NetworkQuality { excellent, good, poor, disconnected, unknown }
```

### 10.7 UI Blocking Patterns

ÙˆÙÙ‚Ø§Ù‹ Ù„Ù€ Toast/Clover POS best practices:

```dart
class PaymentBlockingUI extends StatelessWidget {
  final PaymentController controller;

  @override
  Widget build(BuildContext context) {
    return Obx(() {
      // Block entire UI during payment
      if (controller.isProcessing.value) {
        return WillPopScope(
          onWillPop: () async => false, // Prevent back button
          child: Stack(
            children: [
              // Dim background
              ModalBarrier(
                dismissible: false,
                color: Colors.black54,
              ),
              // Processing indicator
              Center(
                child: Card(
                  child: Padding(
                    padding: EdgeInsets.all(24),
                    child: Column(
                      mainAxisSize: MainAxisSize.min,
                      children: [
                        CircularProgressIndicator(),
                        SizedBox(height: 16),
                        Text(controller.statusMessage.value),
                        SizedBox(height: 8),
                        Text(
                          'Ù„Ø§ ØªØºÙ„Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚',
                          style: TextStyle(color: Colors.red),
                        ),
                      ],
                    ),
                  ),
                ),
              ),
            ],
          ),
        );
      }

      return SizedBox.shrink();
    });
  }
}
```

---

## 11. Ù…Ù‚Ø§Ø±Ù†Ø© Ù…Ø¹ Ø£Ù†Ø¸Ù…Ø© POS Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©

| Ø§Ù„Ù…ÙŠØ²Ø©                | Toast (US) | Square (US) | Clover (US) | WashPOS (SA) |
| --------------------- | ---------- | ----------- | ----------- | ------------ |
| Always-Online         | âœ…         | Hybrid      | âœ…          | âœ…           |
| Timeout Config        | 120s       | 60s         | 90s         | 120s         |
| Idempotency           | âœ…         | âœ…          | âœ…          | âœ…           |
| Retry Logic           | Automatic  | Manual      | Automatic   | Automatic    |
| Network Quality Check | âŒ         | âœ…          | âŒ          | âœ…           |
| ZATCA Compliance      | âŒ         | âŒ          | âŒ          | âœ…           |

---

## 12. Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙØ´Ù„ ÙˆØ§Ù„Ø­Ù„ÙˆÙ„

### Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 1: Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ PIN

```
Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø§Ù†Ù‚Ø·Ø¹ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø¨Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„Ù€ PIN
Ø§Ù„Ø­Ù„:
1. Ø§Ù„Ø¬Ù‡Ø§Ø² Ù„Ø¯ÙŠÙ‡ 30 Ø«Ø§Ù†ÙŠØ© timeout Ù„Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©
2. Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ù‡Ù„Ø© â†’ Ø¹Ø±Ø¶ "ÙØ´Ù„ - Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹"
3. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†ÙØ³ Idempotency Key Ù„Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±
4. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
```

### Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 2: Ø±Ø¯ Ø§Ù„Ø¨Ù†Ùƒ Ø¨Ø·ÙŠØ¡

```
Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø§Ù„Ø¨Ù†Ùƒ ÙŠØ³ØªØºØ±Ù‚ ÙˆÙ‚ØªØ§Ù‹ Ø·ÙˆÙŠÙ„Ø§Ù‹ Ù„Ù„Ø±Ø¯
Ø§Ù„Ø­Ù„:
1. Ø¹Ø±Ø¶ Ù…Ø¤Ø´Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù…Ø¹ Progress
2. Timeout Ø¨Ø¹Ø¯ 120 Ø«Ø§Ù†ÙŠØ© (ÙˆÙÙ‚Ø§Ù‹ Ù„Ù€ Adyen)
3. Ø¹Ø±Ø¶ Ø®ÙŠØ§Ø±Ø§Øª: [Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©] [Ø¥Ù„ØºØ§Ø¡]
4. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ÙŠØ¯ÙˆÙŠØ©
```

### Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 3: Ø§Ù„Ø³ÙŠØ±ÙØ± ØºÙŠØ± Ù…ØªØ§Ø­

```
Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø§Ù„Ø³ÙŠØ±ÙØ± Ù„Ø§ ÙŠØ³ØªØ¬ÙŠØ¨
Ø§Ù„Ø­Ù„:
1. ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„ Ù‚Ø¨Ù„ Ø¨Ø¯Ø¡ Ø£ÙŠ Ø¹Ù…Ù„ÙŠØ©
2. ØªØ¹Ø·ÙŠÙ„ Ø²Ø± "Ø¯ÙØ¹ Ø¨Ø·Ø§Ù‚Ø©" Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø³ÙŠØ±ÙØ± ØºÙŠØ± Ù…ØªØ§Ø­
3. Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø¶Ø­Ø© Ù„Ù„ÙƒØ§Ø´ÙŠØ±
4. Ø§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù†Ù‚Ø¯ÙŠ ÙƒØ¨Ø¯ÙŠÙ„
```

---

## 13. Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

> [!TIP] > **Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø°Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø³ØªÙ‚Ø±:**

1. âœ… **Ø§Ø³ØªØ®Ø¯Ù… Cloud-Centric** Ù„Ù„Ø¨Ø³Ø§Ø·Ø©
2. âœ… **Ø­Ø¯Ø¯ Timeout** Ù…Ù†Ø§Ø³Ø¨ (120 Ø«Ø§Ù†ÙŠØ© Ù„Ù„Ø¯ÙØ¹)
3. âœ… **Ø§Ø³ØªØ®Ø¯Ù… Idempotency** Ù„Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±
4. âœ… **Ø±Ø§Ù‚Ø¨ Ø¬ÙˆØ¯Ø© Ø§Ù„Ø´Ø¨ÙƒØ©** Ù‚Ø¨Ù„ Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
5. âœ… **Ø§Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© ÙˆØ§Ø¶Ø­Ø©** Ù„Ù„ÙƒØ§Ø´ÙŠØ±
6. âœ… **Block UI** Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
7. âœ… **ÙˆÙØ± Fallback** Ù„Ù„Ø¯ÙØ¹ Ø§Ù„Ù†Ù‚Ø¯ÙŠ
8. âœ… **Ø³Ø¬Ù„ ÙƒÙ„ Ø´ÙŠØ¡** Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©

> [!CAUTION] > **ØªØ­Ø°ÙŠØ±:** Ù‡Ø°Ø§ Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ **Ù„Ø§ ÙŠÙ†Ø§Ø³Ø¨** Ø§Ù„Ù…ØºØ§Ø³Ù„ ÙÙŠ:
>
> - Ù…ÙˆØ§Ù‚Ù Ø³ÙÙ„ÙŠØ© (Basements)
> - Ù…Ù†Ø§Ø·Ù‚ Ø¶Ø¹ÙŠÙØ© Ø§Ù„Ø´Ø¨ÙƒØ©
> - Ù…Ù†Ø§Ø·Ù‚ Ø±ÙŠÙÙŠØ©
